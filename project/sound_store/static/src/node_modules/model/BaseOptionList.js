var inherit = require("../utils/inherit");
var BaseOption = require("./BaseOption");

module.exports = BaseOptionList;

/**
 *
 * @param {Object} options - list of all possible options
 * @param {*} defaultValue - default one from the options list
 * @constructor
 */
function BaseOptionList(options, defaultValue){
    BaseOption.call(this, defaultValue);
    Object.defineProperties(this, {
        "options": {
            "value": options, // initial value
            "writable": false, // is able to be changed
            "enumerable": false // is it possible to see this variable when doing for..in or JSON.stringify
        }
    });
}

inherit(BaseOptionList, BaseOption);

BaseOptionList.prototype.set = function(value){
    if(value in this.options){
        BaseOption.prototype.set.call(this, value);
    }
};

BaseOptionList.prototype.valueOf = function(){
    return getKeyByValue(this.options, this.value);
};

function getKeyByValue(object, value){
    var property;
    var result = null;
    for(property in object){
        if(object[property] === value){
            result = property;
        }
    }
    return result;
}
